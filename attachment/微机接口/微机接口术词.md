# CPU结构组成 
#以8086为例
## BIU总线接口部件
### 段寄存器组
- 8086均为16位
- CS (code segment) 代码段 存储指令首区域
- DS (data segment) 数据段
- ES (extra segment) 附加段
- SS (srack segment) 堆栈段

### 16位IP寄存器 （指令指针）
存储偏移地址(将要执行的指令)，计算方法如下：
>设CS：FE00 H  IP：0200 H
>CS段寄存器，存储指令首区域，IP存储偏移地址。
>将要执行的指令地址为CS左移四位（2进制左移四位，16进制左移1位 FE00 H -> FE000H）+IP 地址 = 目的地址（ FE200 H ）

### 20位地址加法器
8086内部寄存器均为16位，但8086支持20位寻址，地址加法器可将16位寄存器集通的信息转换为20位的物理地址

### 6字节指令缓冲器
存储即将执行的指令（按先后顺序在队列中排序），当上一条指令执行完毕后，可快速将指令送至EU执行部件中

## EU执行部件
### ALU算术逻辑单元
CPU算术逻辑运算功能的实现部件
### 寄存器组
#### 通用
- AX、BX、CX、DX
- 高位为H 低位为L,必要时可充当低位寄存器
- AX又称累加器
#### 专用
- BP 基数指针
- SP 堆栈指针
- SI 源变址指针
- DI 目的变址指针

### 标志寄存器 SR
SR共16位，七位弃用
![[FR位示图.jpg]]

#### 状态标志
示意前一步操作后，ALU现在所处的某种状态，共6位

1. 符号标志 SF(sign flag) 它和运算结果的最高位相同。当数据用补码表示时，负数的最高位为1，所以符号标志指出了运算结果是正还是负。
2. 零标志ZF(zeroflag) 如运算结果为零，则ZF为1;如运算结果为非零，则ZF 为0。
3. 奇/偶标志PF(parityflag) 如运算结果的低8位中所含的1的个数为偶数，则 PF为1，否则为0。
4. 进位标志 CF(carryflag) 当加法运算使最高位产生进位时，或者减法运算引起最高位产生借位时，则CF为1。除此之外，移位指令也会影响这一标志。
5. 辅助进位标志 AF(auxiliarycarryflag) 当加法运算时，如果第3位往第4位有 进位，或者当减法运算时，如果第3位从第4位有借位，则AF为1。
6. 溢出标志OF(overflowflag) 当运算过程中产生溢出时，会使OF为1。
>溢出：字节运算结果超过-128 ~ +127 （2的7次方） 或-32768 ~ 32767 （2的15次方）

#### 控制标志
人为设置，对特定功能起控制作用，共计三位

1. 方向标志DF(direction flag)	这是控制串操作指令用的标志。如果DF为0，则串操作过程中地址会不断增值;反之，如果DF为1,则串操作过程中地址不断减值。
2. 中断允许标志IF(interrupt enabl eflag)i这是控制可屏蔽中断的标志。如IF为0，则CPU不能响应可屏蔽中断请求;如IF为1，则CPU可接受可屏蔽中断请求。	
3. 跟踪标志TF(trapflag)也称为单步标志,如果TF为1,则CPU按跟踪方式执行指令。


